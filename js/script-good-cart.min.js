$(document).ready((function(){let t,e=document.querySelector("#main-menu-open-button"),o=document.querySelector("#main-menu-close-button"),n=(document.querySelector(".main-menu_header"),document.querySelector(".main-menu__list"));o.addEventListener("click",()=>{n.style.visibility="hidden",n.style.right="-100%",document.body.style.overflow="auto"}),e.addEventListener("click",()=>{n.style.visibility="visible",n.style.right="0"}),$((function(){$(".fotorama").fotorama().data("fotorama");$(".fotorama").on("fotorama:fullscreenenter",(function(t,e){e.setOptions({fit:"contain"})})),$(".fotorama").on("fotorama:fullscreenexit",(function(t,e){e.setOptions({fit:"cover"})}))})),$(".fancybox").jqPhotoSwipe({galleryOpen:function(t){(new PhotoSwipe).getZoomLevel(3)}}),$(document).ready((function(){$("input[type=file]").fileinput("<button>Выбрать файл</button>")})),document.querySelectorAll(".car-photo-inputs-block__photo-field_field").forEach(t=>{t.addEventListener("change",t=>{if(t.target.value){t.target.parentElement.parentElement.lastElementChild.innerHTML=t.target.files[0].name}})}),document.querySelectorAll(".car-photo-inputs-block__photo-field_field").forEach(e=>{e.addEventListener("change",()=>{let o,n=e.parentElement.nextElementSibling;if(t=n.innerText,!(t.length>21))return!1;o=t.substr(0,10)+"..."+t.substr(-10),n.innerText=o})}),$(".put-auto-link").click((function(t){t.preventDefault(),s("#top"),$(".overlay").css("height","100%"),$(".popup").removeClass("authorization-popup"),$(".popup").removeClass("registration-popup"),$(".popup").addClass("put-car-popup"),$(".modal-content-authorization").css("display","none"),$(".modal-content-registration").css("display","none"),$(".modal-content-successful-registration").css("display","none"),$(".modal-content-put-car").css("display","block"),$(".car-photo-inputs-block__file-upload-status").html("Файл не выбран"),$(".js-overlay-campaign").fadeIn(),$(".js-overlay-campaign").addClass("disabled"),(()=>{let t=(new Date).getFullYear(),e=document.getElementById("put-car_car-year-select"),o=1960;for(;o<=t;)e.insertAdjacentHTML("beforeend",`<option value='${o}'>${o}</option>`),o++})()})),$(".js-button-campaign").click((function(){$(".js-overlay-campaign").fadeIn(),$(".js-overlay-campaign").addClass("disabled")})),$(".js-close-campaign").click((function(){$("form").trigger("reset"),$(".js-overlay-campaign").fadeOut(),$("body").css("overflow","auto"),$(".cars-section-container").css("min-height","1230px")})),$(document).mouseup((function(t){var e=$(".js-popup-campaign");t.target!=e[0]&&0===e.has(t.target).length&&($(".authorization-form").trigger("reset"),$(".registration-form").trigger("reset"),$(".put-car-form").trigger("reset"),$(".js-overlay-campaign").fadeOut(),$("body").css("overflow","auto"),$(".cars-section-container").css("min-height","1230px"))})),$(".modal-content-successful-registration__button__button").click((function(){$("form").trigger("reset"),$(".js-overlay-campaign").fadeOut(),$("body").css("overflow","auto")})),$(".put-car-form").submit((function(t){t.preventDefault(),$.ajax({type:"POST",url:"mail.php",data:$(this).serialize(),success:function(){s("#top");let t=$(document.body),e=t.innerWidth();t.css("overflow","hidden"),t.width(e),$(".popup").removeClass("put-car-popup"),$(".popup").addClass("authorization-popup"),$(".overlay").css("height","100%"),$(".modal-content-put-car").css("display","none"),$(".modal-content-successful-registration__text").text("Ваше авто выставлено на аукцион!"),$(".modal-content-successful-registration").fadeIn(),$(this).find("input").val(""),$(this).find("select").val(""),$(".put-car-form").trigger("reset")},error:function(){s("#top");let t=$(document.body),e=t.innerWidth();t.css("overflow","hidden"),t.width(e),$(".popup").removeClass("put-car-popup"),$(".popup").addClass("authorization-popup"),$(".overlay").css("height","100%"),$(".modal-content-put-car").css("display","none"),$(".modal-content-successful-registration__text").text("При отправке данных произошла ошибка!"),$(".modal-content-successful-registration").fadeIn(),$(this).find("input").val(""),$(this).find("select").val(""),$(".put-car-form").trigger("reset")}})}));let a,i,r=document.querySelector(".up-button");function s(t){return $("html,body").animate({scrollTop:$(t).offset().top-20},500),!1}r.addEventListener("click",()=>{s("#top")}),$(window).width()>1490&&(a=$(".container").offset(),i=a.left,r.style.right=i+2+"px",window.addEventListener("resize",(function(t){a=$(".container").offset(),i=a.left,r.style.right=i+2+"px"})))}));const calculateCarCardParameters=()=>{let t,e;document.querySelectorAll(".car-gallery-block__slider-big").forEach(o=>{$(window).width()<=1490&&(t=o.clientWidth,e=t/3,o.setAttribute("data-thumbwidth",e),o.setAttribute("data-thumbheight","130")),$(window).width()<=1300&&o.setAttribute("data-thumbheight","120"),$(window).width()<=1160&&o.setAttribute("data-thumbheight","100"),$(window).width()<=600&&o.setAttribute("data-height","360"),$(window).width()<=425&&(o.setAttribute("data-thumbheight","80"),o.setAttribute("data-height","290")),$(window).width()<=360&&(o.setAttribute("data-thumbheight","65"),o.setAttribute("data-height","240"))}),document.querySelectorAll(".description-top-block-favourites__add-to-favourites_link").forEach(t=>{t.addEventListener("click",(function(t){event.preventDefault(),this.querySelector(".fill-color").classList.toggle("active")}))})};$(".main-content-good-card ").children(".car-card").length>0&&calculateCarCardParameters();